[ { "title": "Home Server - Part 2 - pfSense and piHole Install", "url": "/posts/part2-pfsense-pihole/", "categories": "HomeServer, Hardware", "tags": "hardware, server, homelab, ryzen, pfsense, proxmox", "date": "2022-07-05 15:01:01 +0100", "snippet": "pfSense setupDownload pfsense isoclick local storage -&gt; iso images -&gt; uploadChoose pfsense isoCreate VM (top right)Give a name (pfsense), click nextchoose pfsense image from iso image dropdownchoose linux 5.xclick nextclick nextclick nextIncrease cores to 4click nextReduce RAM to 1024MBclick nextuncheck firewallclick nextclick finishclick the pfsense vm in the left panelclick hardwareadd network devicechoose the second bridge device from the dropdownclick addtake note of the mac address of the second network adapterclick Startfollow the installation of pfsensechoose no when asked to set up vlanschoose the adapter with the mac address we noted down when asked about the WAN interfacechoose the other adapter when asked about the LAN interfaceDisconnect the server from your current LAN Setup and directly attach to your main machine until configuration is complete.piHole - dns adblocker and local dns server" }, { "title": "Home Server - Part 1 - Specs and Proxmox Install", "url": "/posts/part1-hardware/", "categories": "HomeServer, Hardware", "tags": "hardware, server, homelab, ryzen, pfsense, proxmox", "date": "2022-07-05 15:01:01 +0100", "snippet": "SpecsRyzen 2600X48GB DDR4 2666MHz120GB Boot SSD512GB VM Storage SSDGeforce GT240 (for installation)Two Gigabit Ethernet AdaptersAssumes home server taking role of router for the network skip pfsense setup and choose ip for proxmox in current lan range if using existing router.Proxmox SetupDownload Proxmox 7 ISO - Burn to DVD or USBInstall Proxmox 7Use IP 192.168.1.2Use 120GB SSDOpen WebUI (https://192.168.1.2:8006)Login with root and password set during installclick node under datacenter, system section, network then create bridgeLeave all blank except bridge ports (enter name of second ethernet card, inactive card behind window)" }, { "title": "Home Server - GPU Passthrough to Proxmox VM", "url": "/posts/gpu-passthrough/", "categories": "HomeServer, Hardware", "tags": "hardware, server, homelab, ryzen, pfsense, proxmox", "date": "2022-07-05 15:01:01 +0100", "snippet": "GPU Passthrough - Proxmox 7.2BIOS/UEFI optionsEnable IOMMU / VT-d in BIOS optionsEdit /etc/default/grub/Change intel_iommu for amd_iommu on amd systemsGRUB_CMDLINE_LINUX_DEFAULT=\"textonly quiet intel_iommu=on video=vesafb:off video=efifb:off video=simplefb:off\"Update GRUBupdate-grubEdit /etc/modules/vfiovfio_iommu_type1vfio_pcivfio_virqfdEdit /etc/modprobe.d/vfio.confChange idâ€™s to match your graphics card.options vfio-pci ids=10de:1430,10de:0fba disable_vga=1Update module blacklistecho \"blacklist radeon\" &gt;&gt; /etc/modprobe.d/blacklist.confecho \"blacklist nouveau\" &gt;&gt; /etc/modprobe.d/blacklist.confecho \"blacklist nvidia\" &gt;&gt; /etc/modprobe.d/blacklist.confecho \"options kvm ignore_msrs=1\" &gt; /etc/modprobe.d/kvm.confupdate-initramfs -ucreate /root/fix_gpu_pass.shcd /root/touch fix_gpu_pass.shchmod +x fix_gpu_pass.shnano fix_gpu_pass.shreplace pci device with correct number from lspci#!/bin/bashecho 1 &gt; /sys/bus/pci/devices/0000\\:04\\:00.0/removeecho 1 &gt; /sys/bus/pci/rescanEdit crontabcrontab -e@reboot /root/fix_gpu_pass.shReboot the systemPassthrough gpu using web ui" } ]
